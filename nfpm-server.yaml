name: backuppc-tunnel-server
arch: amd64
platform: linux
version: ${VERSION}
maintainer: Steffen Heil <steffen.heil@secforge.de>
description: BackupPC WebSocket tunnel server for client-initiated backups
vendor: ""
homepage: https://github.com/steffen-heil-secforge/backuppc-wstunnel
license: MIT

contents:
  - src: bin/backuppc-tunnel-server
    dst: /usr/local/bin/backuppc-tunnel-server
    file_info:
      mode: 0755

  - src: config/backuppc-tunnel.service
    dst: /etc/systemd/system/backuppc-tunnel.service
    file_info:
      mode: 0644

  - src: scripts/init-ca.sh
    dst: /usr/share/backuppc-tunnel/init-ca.sh
    file_info:
      mode: 0755

  - src: scripts/register-client.sh
    dst: /usr/share/backuppc-tunnel/register-client.sh
    file_info:
      mode: 0755

  - dst: /etc/backuppc-tunnel
    type: dir
    file_info:
      mode: 0755

scripts:
  postinstall: scripts/server-postinstall.sh
  preremove: scripts/server-preremove.sh
  postremove: scripts/server-postremove.sh
